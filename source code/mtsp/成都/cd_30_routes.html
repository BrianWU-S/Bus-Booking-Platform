<!DOCTYPE HTML>
<html>
<head>
  <title>加载海量点</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <style type="text/css">
    html,body{
        margin:0;
        width:100%;
        height:100%;
        background:#ffffff;
    }
    #map{
        width:100%;
        height:100%;
    }
    #panel {
        position: absolute;
        top:30px;
        left:10px;
        z-index: 999;
        color: #fff;
    }
    #login{
        position:absolute;
        width:300px;
        height:40px;
        left:50%;
        top:50%;
        margin:-40px 0 0 -150px;
    }
    #login input[type=password]{
        width:200px;
        height:30px;
        padding:3px;
        line-height:30px;
        border:1px solid #000;
    }
    #login input[type=submit]{
        width:80px;
        height:38px;
        display:inline-block;
        line-height:38px;
    }
  </style>
  <script type="text/javascript" src="//api.map.baidu.com/api?v=2.0&ak=5BAe2AL4Gbd1sCwNfexkr4m0DRyTsUkG"></script>
</head>
<body>
    <div id="map"></div>
    <script type="text/javascript">

        !function(mapInit) {
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = "http://api.map.baidu.com/api?v=2.0&ak=5BAe2AL4Gbd1sCwNfexkr4m0DRyTsUkG&callback=mapinit";
            window['mapinit'] = function() {
                mapInit();
            };
            document.head.appendChild(script);
        }(function() {
            // 这里使用BMap
            var map = new BMap.Map("map", {});                        // 创建Map实例
            map.centerAndZoom(new BMap.Point(104.0573, 30.6471), 15);     // 初始化地图,设置中心点坐标和地图级别
            map.enableScrollWheelZoom();                        //启用滚轮放大缩小
            if (document.createElement('canvas').getContext) {  // 判断当前浏览器是否支持绘制海量点
                var points = [];  // 添加海量点数据

                points.push(new BMap.Point(103.8051590363636,30.963650945454546));
                points.push(new BMap.Point(104.10467904423562,30.707500350749005));
                points.push(new BMap.Point(104.13651172442876,30.752940226233587));
                points.push(new BMap.Point(103.97507879212512,30.674783998841846));
                points.push(new BMap.Point(104.04367403733531,30.633830722210394));
                points.push(new BMap.Point(104.11746361221917,30.638643975374155));
                points.push(new BMap.Point(104.08133323115544,30.6866909739079));
                points.push(new BMap.Point(104.039547973379,30.68627070394849));
                points.push(new BMap.Point(104.06773017647087,30.534124207664938));
                points.push(new BMap.Point(104.19690980628286,30.8318686937173));
                points.push(new BMap.Point(104.08008047245222,30.613764481006303));
                points.push(new BMap.Point(103.83809948601399,30.680027346153842));
                points.push(new BMap.Point(104.06683598300572,30.650090424371484));
                points.push(new BMap.Point(104.04747758273778,30.663850955470195));
                points.push(new BMap.Point(104.09058811073663,30.643467891162167));
                points.push(new BMap.Point(104.13298944255449,30.669586447532108));
                points.push(new BMap.Point(104.06649433860261,30.70895409400995));
                points.push(new BMap.Point(103.99399107338353,30.630380029702973));
                points.push(new BMap.Point(104.15241593290558,30.61348886420225));
                points.push(new BMap.Point(104.10589251395174,30.67219409209641));
                points.push(new BMap.Point(103.95409391235789,30.571237399747652));
                points.push(new BMap.Point(104.01463179056358,30.663453029459152));
                points.push(new BMap.Point(104.0816191252816,30.660025227903375));
                points.push(new BMap.Point(104.04047691391244,30.7115362974636));
                points.push(new BMap.Point(104.04454513696054,30.582866292057723));
                points.push(new BMap.Point(104.06448946228429,30.672438134742194));
                points.push(new BMap.Point(103.95721658202253,30.77042614831461));
                points.push(new BMap.Point(104.18258184263487,30.684318259835305));
                points.push(new BMap.Point(104.0044007963141,30.708132060620716));
                points.push(new BMap.Point(104.05783372052922,30.767446128809734));
                points.push(new BMap.Point(103.8051590363636,30.963650945454546));

                var options = {
                    size: BMAP_POINT_SIZE_BIG,
                    shape: BMAP_POINT_SHAPE_STAR,
                    color: 'rgb(0,0,0)'
                }
                var pointCollection = new BMap.PointCollection(points, options);  // 初始化PointCollection
                pointCollection.addEventListener('click', function (e) {
                    alert('单击点的坐标为：' + e.point.lng + ',' + e.point.lat);  // 监听点击事件
                });
                map.addOverlay(pointCollection);  // 添加Overlay
				var sy = new BMap.Symbol(BMap_Symbol_SHAPE_BACKWARD_OPEN_ARROW, {
				scale: 0.6,//图标缩放大小
				strokeColor:'#fff',//设置矢量图标的线填充颜色
				strokeWeight: '2',//设置线宽
				});
				var icons = new BMap.IconSequence(sy, '10', '30');
				// 创建polyline对象
				var pois = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.071478,30.663951),
new BMap.Point(104.04367403733531,30.633830722210394),
new BMap.Point(103.95721658202253,30.77042614831461),
new BMap.Point(103.8051590363636,30.963650945454546),
new BMap.Point(103.83809948601399,30.680027346153842),
new BMap.Point(103.97507879212512,30.674783998841846),
new BMap.Point(104.071478,30.663951)
				];
				var polyline =new BMap.Polyline(pois, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'3',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#2828FF" //折线颜色
				});
				// 创建polyline对象
				var pois1 = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.039547973379,30.68627070394849),
new BMap.Point(104.04047691391244,30.7115362974636),
new BMap.Point(104.0044007963141,30.708132060620716),
new BMap.Point(104.05783372052922,30.767446128809734),
new BMap.Point(104.13651172442876,30.752940226233587),
new BMap.Point(104.19690980628286,30.8318686937173),
new BMap.Point(104.18258184263487,30.684318259835305),
new BMap.Point(104.13298944255449,30.669586447532108),
new BMap.Point(104.071478,30.663951)
				];
				map.addOverlay(polyline);          //增加折线
				
				var polyline1 =new BMap.Polyline(pois1, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'3',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#005757" //折线颜色
				});

				map.addOverlay(polyline1);          //增加折线
				// 创建polyline对象
				var pois2 = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.15241593290558,30.61348886420225),
new BMap.Point(104.11746361221917,30.638643975374155),
new BMap.Point(104.06683598300572,30.650090424371484),
new BMap.Point(104.0816191252816,30.660025227903375),
new BMap.Point(104.10467904423562,30.707500350749005),
new BMap.Point(104.10589251395174,30.67219409209641),
new BMap.Point(104.06448946228429,30.672438134742194),
new BMap.Point(104.071478,30.663951)
				];
				var polyline2 =new BMap.Polyline(pois2, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'3',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#FFDC35" //折线颜色
				});

				map.addOverlay(polyline2);          //增加折线
				// 创建polyline对象
				var pois3 = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.09058811073663,30.643467891162167),
new BMap.Point(104.06649433860261,30.70895409400995),
new BMap.Point(104.08133323115544,30.6866909739079),
new BMap.Point(104.04747758273778,30.663850955470195),
new BMap.Point(104.071478,30.663951)
				];
				var polyline3 =new BMap.Polyline(pois3, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'3',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#F75000" //折线颜色
				});

				map.addOverlay(polyline3);          //增加折线
				// 创建polyline对象
				var pois4 = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.08008047245222,30.613764481006303),
new BMap.Point(104.04454513696054,30.582866292057723),
new BMap.Point(104.06773017647087,30.53412420766493),
new BMap.Point(103.95409391235789,30.571237399747652),
new BMap.Point(103.99399107338353,30.630380029702973),
new BMap.Point(104.01463179056358,30.663453029459152),
new BMap.Point(104.071478,30.663951)
				];
				var polyline4 =new BMap.Polyline(pois4, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'3',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#18a45b" //折线颜色
				});

				map.addOverlay(polyline4);          //增加折线
				


            } else {
                alert('请在chrome、safari、IE8+以上浏览器查看本示例');
            }
        });





  </script>
</body>
</html>
