<!DOCTYPE HTML>
<html>
<head>
  <title>加载海量点</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <style type="text/css">
    html,body{
        margin:0;
        width:100%;
        height:100%;
        background:#ffffff;
    }
    #map{
        width:100%;
        height:100%;
    }
    #panel {
        position: absolute;
        top:30px;
        left:10px;
        z-index: 999;
        color: #fff;
    }
    #login{
        position:absolute;
        width:300px;
        height:40px;
        left:50%;
        top:50%;
        margin:-40px 0 0 -150px;
    }
    #login input[type=password]{
        width:200px;
        height:30px;
        padding:3px;
        line-height:30px;
        border:1px solid #000;
    }
    #login input[type=submit]{
        width:80px;
        height:38px;
        display:inline-block;
        line-height:38px;
    }
  </style>
  <script type="text/javascript" src="//api.map.baidu.com/api?v=2.0&ak=5BAe2AL4Gbd1sCwNfexkr4m0DRyTsUkG"></script>
</head>
<body>
    <div id="map"></div>
    <script type="text/javascript">

        !function(mapInit) {
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = "http://api.map.baidu.com/api?v=2.0&ak=5BAe2AL4Gbd1sCwNfexkr4m0DRyTsUkG&callback=mapinit";
            window['mapinit'] = function() {
                mapInit();
            };
            document.head.appendChild(script);
        }(function() {
            // 这里使用BMap
            var map = new BMap.Map("map", {});                        // 创建Map实例
            map.centerAndZoom(new BMap.Point(104.0573, 30.6471), 15);     // 初始化地图,设置中心点坐标和地图级别
            map.enableScrollWheelZoom();                        //启用滚轮放大缩小
            if (document.createElement('canvas').getContext) {  // 判断当前浏览器是否支持绘制海量点
                var points = [];  // 添加海量点数据

                points.push(new BMap.Point(103.8051590363636,30.963650945454546));
                points.push(new BMap.Point(104.10467904423562,30.707500350749005));
                points.push(new BMap.Point(104.13651172442876,30.752940226233587));
                points.push(new BMap.Point(103.97507879212512,30.674783998841846));
                points.push(new BMap.Point(104.04367403733531,30.633830722210394));
                points.push(new BMap.Point(104.11746361221917,30.638643975374155));
                points.push(new BMap.Point(104.08133323115544,30.6866909739079));
                points.push(new BMap.Point(104.039547973379,30.68627070394849));
                points.push(new BMap.Point(104.06773017647087,30.534124207664938));
                points.push(new BMap.Point(104.19690980628286,30.8318686937173));
                points.push(new BMap.Point(104.08008047245222,30.613764481006303));
                points.push(new BMap.Point(103.83809948601399,30.680027346153842));
                points.push(new BMap.Point(104.06683598300572,30.650090424371484));
                points.push(new BMap.Point(104.04747758273778,30.663850955470195));
                points.push(new BMap.Point(104.09058811073663,30.643467891162167));
                points.push(new BMap.Point(104.13298944255449,30.669586447532108));
                points.push(new BMap.Point(104.06649433860261,30.70895409400995));
                points.push(new BMap.Point(103.99399107338353,30.630380029702973));
                points.push(new BMap.Point(104.15241593290558,30.61348886420225));
                points.push(new BMap.Point(104.10589251395174,30.67219409209641));
                points.push(new BMap.Point(103.95409391235789,30.571237399747652));
                points.push(new BMap.Point(104.01463179056358,30.663453029459152));
                points.push(new BMap.Point(104.0816191252816,30.660025227903375));
                points.push(new BMap.Point(104.04047691391244,30.7115362974636));
                points.push(new BMap.Point(104.04454513696054,30.582866292057723));
                points.push(new BMap.Point(104.06448946228429,30.672438134742194));
                points.push(new BMap.Point(103.95721658202253,30.77042614831461));
                points.push(new BMap.Point(104.18258184263487,30.684318259835305));
                points.push(new BMap.Point(104.0044007963141,30.708132060620716));
                points.push(new BMap.Point(104.05783372052922,30.767446128809734));
                points.push(new BMap.Point(103.8051590363636,30.963650945454546));

                var options = {
                    size: BMAP_POINT_SIZE_BIG,
                    shape: BMAP_POINT_SHAPE_STAR,
                    color: 'rgb(0,0,0)'
                }
                var pointCollection = new BMap.PointCollection(points, options);  // 初始化PointCollection
                pointCollection.addEventListener('click', function (e) {
                    alert('单击点的坐标为：' + e.point.lng + ',' + e.point.lat);  // 监听点击事件
                });
                map.addOverlay(pointCollection);  // 添加Overlay
				var sy = new BMap.Symbol(BMap_Symbol_SHAPE_BACKWARD_OPEN_ARROW, {
				scale: 0.6,//图标缩放大小
				strokeColor:'#fff',//设置矢量图标的线填充颜色
				strokeWeight: '2',//设置线宽
				});
				var icons = new BMap.IconSequence(sy, '10', '30');
				// 创建polyline对象
				var pois = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.04085864958978,30.68942703227448),
new BMap.Point(103.97411889615151,30.674829894929715),
new BMap.Point(103.94948184660772,30.777698828908612),
new BMap.Point(103.8051590363636,30.963650945454546),
new BMap.Point(103.8373913180212,30.680490003533567),
new BMap.Point(103.94552975040017,30.57314368799975),
new BMap.Point(103.9946007597505,30.56801212792514),
new BMap.Point(104.06528678921995,30.537299016894625),
new BMap.Point(104.02932773796086,30.643680218724786)
				];
				var polyline =new BMap.Polyline(pois, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'8',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#18a41b" //折线颜色
				});
				// 创建polyline对象
				var pois = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.071478,30.663951),
new BMap.Point(104.07177709321023,30.69590671228996),
new BMap.Point(104.04532086043693,30.717773845873793),
new BMap.Point(104.0548143169688,30.66732642730901),
new BMap.Point(104.01480035675587,30.67518010964407),
new BMap.Point(103.99385526475426,30.6340718372863)
				];
				var polyline =new BMap.Polyline(pois, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'8',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#18a42b" //折线颜色
				});

				map.addOverlay(polyline);          //增加折线
				// 创建polyline对象
				var pois = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.071478,30.663951),
new BMap.Point(104.0565842858636,30.63757869923412),
new BMap.Point(104.05664203303498,30.59840352195875),
new BMap.Point(104.08856289065436,30.62220123695445),
new BMap.Point(104.14254868014363,30.596270751123065),
new BMap.Point(104.30876074999995,30.576014314285704),
new BMap.Point(104.16398739218106,30.68367147414877),
new BMap.Point(104.1036445747207,30.70692787557619),
new BMap.Point(104.13649999150519,30.75328980339819),
new BMap.Point(104.19639943832034,30.832092496063016)
				];
				var polyline =new BMap.Polyline(pois, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'8',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#18a43b" //折线颜色
				});

				map.addOverlay(polyline);          //增加折线
				// 创建polyline对象
				var pois = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.07177709321023,30.69590671228996),
new BMap.Point(104.10325333589729,30.651910379702276),
new BMap.Point(104.08317615193523,30.675981763225842)
				];
				var polyline =new BMap.Polyline(pois, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'8',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#18a44b" //折线颜色
				});

				map.addOverlay(polyline);          //增加折线
				// 创建polyline对象
				var pois = [
					new BMap.Point(104.071478,30.663951),
new BMap.Point(104.071478,30.663951),
new BMap.Point(103.99712477603472,30.71922053889584),
new BMap.Point(104.05866916187057,30.768406079136778),
new BMap.Point(104.11234684943379,30.6743044922482),
new BMap.Point(104.07724601835105,30.655221762390543)
				];
				var polyline =new BMap.Polyline(pois, {
				enableEditing: false,//是否启用线编辑，默认为false
				enableClicking: true,//是否响应点击事件，默认为true
				icons:[icons],
				strokeWeight:'8',//折线的宽度，以像素为单位
				strokeOpacity: 0.8,//折线的透明度，取值范围0 - 1
				strokeColor:"#18a45b" //折线颜色
				});

				map.addOverlay(polyline);          //增加折线
				


            } else {
                alert('请在chrome、safari、IE8+以上浏览器查看本示例');
            }
        });





  </script>
</body>
</html>
